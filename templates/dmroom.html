<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DMRoom</title>
</head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.1.3/socket.io.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>

    const socket = io.connect("http://127.0.0.1:5000");
    function insert_connected(data){
        var tag = document.createElement("p");
        var text = document.createTextNode(data +" is online");
        tag.appendChild(text);
        var element = document.getElementById("online");
        element.appendChild(tag);
    }
    function insert_disconnected(data){
        var tag = document.createElement("p");
        var text = document.createTextNode(data +" disconnected");
        tag.appendChild(text);
        var element = document.getElementById("online");
        element.appendChild(tag);
    }

    $(document).ready(function (){
        socket.on('connect',function (){
            socket.emit("loadOnline");
        });

        socket.on('renderOnline', function (data){
             for (const key in data) {
                 insert_connected(key);
             }
        });

        socket.on('join', function (data) {
            insert_connected(data)
        });
        socket.on("disconnect", function () {
            socket.emit("disconnected");
        });
        socket.on("remove_dis",function (data){
           insert_disconnected(data)
        });
    });
</script>
<body>
<div id = "online">

</div>
</body>
</html>